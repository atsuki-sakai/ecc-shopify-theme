<div class="color-{{ section.settings.color_scheme }} gradient">
  <div class="campaign-features section-{{ section.id }}-padding">
    <div class="campaign-features__inner">
      <!-- Swiper コンテナ -->
      <div class="swiper-container-2">
        <div class="swiper-wrapper">
          {% for block in section.blocks %}
            <div class="swiper-slide">
              <a
                {% if block.settings.link != blank %}
                  href="{{ block.settings.link }}"
                {% endif %}
                class="campaign-feature__item"
              >
                {% if block.settings['image-jp'] %}
                  <img
                    class="campaign-feature__img"
                    src="{{ block.settings.image-jp | image_url: width: 1000 }}"
                    alt="{{ block.settings.description | strip_html }}"
                    width="1000"
                    height="675"
                    loading="lazy"
                  >
                {% else %}
                  <img
                    class="campaign-feature__img"
                    src="https://via.placeholder.com/400x225"
                    alt="Placeholder"
                    width="400"
                    height="225"
                    loading="lazy"
                  >
                {% endif %}
                <div class="campaign-feature__content">
                  <div class="campaign-feature__tags">
                    {% assign tags = block.settings.tags | split: ',' %}
                    {% assign colors = block.settings.colors | split: ',' %}
                    {% for tag in tags %}
                      <span
                        class="campaign-feature__tag"
                        style="background-color: {{ colors[forloop.index0] | default: '#000' }};"
                      >
                        {{ tag | strip }}
                      </span>
                    {% endfor %}
                  </div>
                  <p class="campaign-feature__desc">{{ block.settings.description | strip_html }}</p>
                  <span class="campaign-feature__date">{{ block.settings.postdate }}</span>
                </div>
              </a>
            </div>
          {% endfor %}
        </div>
        <!-- Swiperのページネーション -->
        <div class="swiper-pagination-2"></div>
      </div>
    </div>
  </div>
</div>

<!-- Swiperのスクリプト設定 -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var swiper = new Swiper('.swiper-container-2', {
      slidesPerView: 3,
      spaceBetween: 20,
      loop: true,
      autoplay: {
        delay: 3000,
        disableOnInteraction: false,
      },
      pagination: {
        el: '.swiper-pagination-2',
        clickable: true,
      },
      breakpoints: {
        768: {
          slidesPerView: 1,
          spaceBetween: 10
        }
      }
    });
  });

  // リダイレクトスクリプトの設定
  {% if customer.tags.size > 0 and template != 'cart' %}
    let checkoutbtninterval = setInterval(function() {
      var checkoutButtons = document.querySelectorAll("input[name='checkout'], button[name='checkout'], input[name='goto_pp'], button[name='goto_pp'], input[name='goto_gc'], button[name='goto_gc'], [href$='checkout']");
      var WPD_RedirectToCart = function(e) {
        e.stopPropagation();
        e.preventDefault();
        window.location = '/cart';
      };
      for (var i = 0; i < checkoutButtons.length; i++) {
        checkoutButtons[i].addEventListener('click', WPD_RedirectToCart, false);
      }
    }, 500);
  {% endif %}
</script>
